import{_ as k,a as v,c as x,w as n,r,o as C,b as a,d as l,e as g,f as I,g as p,t as S}from"./index.f270c34b.js";const L={name:"LoginPage",data(){return localStorage.getItem("intelickIsLoggedIn")&&this.$router.push("/"),{form:{username:"",password:""},rememberMe:!1,loading:!1}},created(){const t=localStorage.getItem("rememberedCredentials");if(t){const e=this.decodeCredentials(t);this.form.username=e.username,this.form.password=e.password,this.rememberMe=!0}},methods:{encodeCredentials(t){return btoa(JSON.stringify(t))},decodeCredentials(t){return JSON.parse(atob(t))},async handleLogin(){var d,m,s;const{username:t,password:e}=this.form;if(!t||!e){this.$notification.error({message:"Login Error",description:"Please enter username and password"});return}this.loading=!0;try{const o=await v.login(t,e);if(o){if(localStorage.clear(),localStorage.setItem("intelickIsLoggedIn","true"),localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("customers",JSON.stringify(o.customers)),(d=o.customers)!=null&&d[0]&&(localStorage.setItem("currentCustomer",JSON.stringify(o.customers[0])),localStorage.setItem("currentUserId",o.customers[0].customerId)),this.rememberMe){const u={username:t,password:e};localStorage.setItem("rememberedCredentials",this.encodeCredentials(u))}this.$router.push("/dashboard")}}catch(o){console.error("Login failed:",o),this.$notification.error({message:"Login Failed",description:((s=(m=o.response)==null?void 0:m.data)==null?void 0:s.message)||"Please check your username and password"})}finally{this.loading=!1}}}},P={class:"login-container",style:{width:"400px",padding:"40px",background:"rgba(255, 255, 255, 0.95)","border-radius":"24px","box-shadow":"0 8px 32px rgba(108, 152, 255, 0.15)",border:"1px solid rgba(108, 152, 255, 0.2)"}};function N(t,e,d,m,s,o){const u=r("a-input"),c=r("a-form-item"),f=r("a-input-password"),_=r("a-checkbox"),h=r("a-button"),b=r("a-form"),y=r("a-layout-content"),w=r("a-layout");return C(),x(w,{style:{height:"100vh",background:"linear-gradient(135deg, #E8F0FF 0%, #C7D9FF 100%)"}},{default:n(()=>[a(y,{style:{display:"flex","align-items":"center","justify-content":"center",height:"100%",padding:"20px"}},{default:n(()=>[l("div",P,[e[4]||(e[4]=l("div",{class:"logo-section"},[l("h2",{class:"app-title"},[g(" Intelick Page Creator "),l("span",{class:"title-emoji"},"\u{1F31F}")]),l("p",{class:"subtitle"},"Create Effective Pages with Ease")],-1)),a(b,{layout:"vertical",onSubmit:I(o.handleLogin,["prevent"])},{default:n(()=>[a(c,{label:"Username"},{default:n(()=>[a(u,{value:s.form.username,"onUpdate:value":e[0]||(e[0]=i=>s.form.username=i),placeholder:"Enter your username",size:"large",class:"custom-input",onKeydown:p(o.handleLogin,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(c,{label:"Password"},{default:n(()=>[a(f,{value:s.form.password,"onUpdate:value":e[1]||(e[1]=i=>s.form.password=i),placeholder:"Enter your password",size:"large",class:"custom-input",onKeydown:p(o.handleLogin,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(c,null,{default:n(()=>[a(_,{checked:s.rememberMe,"onUpdate:checked":e[2]||(e[2]=i=>s.rememberMe=i)},{default:n(()=>e[3]||(e[3]=[g("Remember me")])),_:1},8,["checked"])]),_:1}),a(c,null,{default:n(()=>[a(h,{type:"primary",block:"",size:"large",onClick:o.handleLogin,class:"login-button",loading:s.loading},{default:n(()=>[g(S(s.loading?"Logging in...":"Login"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1})}const F=k(L,[["render",N],["__scopeId","data-v-33cc0ec2"]]);export{F as default};
